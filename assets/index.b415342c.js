var q=Object.defineProperty,F=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var L=(t,s,n)=>s in t?q(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,A=(t,s)=>{for(var n in s||(s={}))M.call(s,n)&&L(t,n,s[n]);if(j)for(var n of j(s))G.call(s,n)&&L(t,n,s[n]);return t},B=(t,s)=>F(t,H(s));import{v as J,d as E,r as h,c as C,u as W,a as k,b as T,e as f,f as u,g as e,h as _,F as I,i as V,o as d,t as g,j as K,p as Q,k as X,l as N,n as z,m as Y,q as P,s as Z,w as ee,x as te,P as se,y as oe,z as ne,A as ie,B as re,C as ae,D as le,E as ce,G as de}from"./vendor.a3ded7be.js";const ue=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}};ue();const pe="100087b3bd25a77c425b",ve="https://reterw.github.io/vvote/index.html",me="https://602vote.azurewebsites.net/api/auth",he="https://github.com/login/oauth/authorize";let w=localStorage.getItem("device-id");if(!w){const t=J();localStorage.setItem("device-id",t),w=t}const b=E("user",()=>{const t=h(""),s=h(w),n=h(""),c=h(""),i=C(()=>c.value.length>0),a=W();async function l(){console.log(`${a.code}`);const o=`${me}?code=${a.code}&state=${w}`,r=await fetch(o,{mode:"cors"}),{userId:p,avatarUrl:$,accessToken:y}=await r.json();t.value=p,n.value=$,c.value=y}return a.code&&l(),{username:t,deviceId:s,avatarUrl:n,isLogined:i}}),S=E("vote-topic",()=>{const t=h([]);async function s(){const o=b(),r=await(await fetch("https://602vote.azurewebsites.net/api/vote",{headers:{username:o.username}})).json();await Promise.all(r.map(async p=>{if(p.author!=="Anonymous"){const $=await fetch(`https://api.github.com/users/${p.author}`),{avatar_url:y}=await $.json();p.avatar=y}})),t.value=r}async function n(o,r){const p=b(),$={voteTopicId:o.id,voteChoiceId:r.id},y=await fetch("https://602vote.azurewebsites.net/api/vote",{method:"PUT",body:JSON.stringify($),headers:{username:p.username},mode:"cors"}),{voteCount:D}=await y.json();r.voteCount=D,r.voted=!0}async function c(o){o.liked?o.liked=!1:o.liked=!0}async function i(o){o.saved=!o.saved}async function a(o){const r=b();await fetch("https://602vote.azurewebsites.net/api/vote",{method:"POST",body:JSON.stringify(o),headers:{username:r.username},mode:"cors"}),s()}async function l(o){const r=b();await fetch("https://602vote.azurewebsites.net/api/vote",{method:"DELETE",body:JSON.stringify({id:o.id}),headers:{username:r.username},mode:"cors"}),s()}return{refresh:s,votes:t,vote:n,like:c,save:i,create:a,remove:l}});var x=(t,s)=>{const n=t.__vccOpts||t;for(const[c,i]of s)n[c]=i;return n};const fe=k({setup(){let t=h([]),s=h(""),n=h("");const c=S(),{push:i}=T();return{choices:t,choice:s,title:n,addChoice(){t.value.push(s.value),s.value!==""&&(s.value="")},deleteChoice(a){t.value.splice(t.value.indexOf(a),1)},submitVote(){c.create({title:n.value,choices:t.value,single:!1}),i("/")}}}}),_e={class:"mt-35 z-10"},ge={class:"flex flex-col w-full mt-10"},be={class:""},xe={class:"flex flex-col gap-2 text-xl mt-5 pt-10"},$e={class:"flex items-center bg-dark-200 p-2 justify-between px-5 rounded-xl hover:cursor-pointer"},ye={class:""},ke=["onClick"],we={class:"flex items-center pt-5 sm:flex-row flex-col sm:h-auto h-full"},Se={class:"inline-flex"},Ie=e("div",{class:"flex-grow"},null,-1),Ve=e("i",{class:"pi pi-check",style:{fontSize:"1.5rem"}},null,-1),Ce=e("div",{class:""},"submit",-1),ze=[Ve,Ce];function je(t,s,n,c,i,a){const l=f("InputText");return d(),u("div",_e,[e("div",ge,[e("div",be,[_(l,{placeholder:"title",type:"text",class:"bg-dark-200 w-full text-light-300 rounded-xl",modelValue:t.title,"onUpdate:modelValue":s[0]||(s[0]=o=>t.title=o)},null,8,["modelValue"])]),e("div",xe,[(d(!0),u(I,null,V(t.choices,(o,r)=>(d(),u("div",$e,[e("div",ye,g(r+1)+". "+g(o),1),e("i",{class:"pi pi-times",onClick:p=>t.deleteChoice(o)},null,8,ke)]))),256))]),e("div",we,[e("div",Se,[_(l,{placeholder:"choice content",type:"text",class:"bg-dark-300 text-light-300 rounded-xl",modelValue:t.choice,"onUpdate:modelValue":s[1]||(s[1]=o=>t.choice=o)},null,8,["modelValue"]),e("i",{class:"pi pi-plus mx-5 my-5",style:{fontSize:"1.5rem"},onClick:s[2]||(s[2]=(...o)=>t.addChoice&&t.addChoice(...o))})]),Ie,e("div",{class:"flex gap-4 items-center cursor-pointer flex-shrink hover:bg-dark-300 rounded-xl sm:p-2 p-5 md:w-30 sm:p",style:{fontSize:"1.5rem"},onClick:s[3]||(s[3]=(...o)=>t.submitVote&&t.submitVote(...o))},ze)])])])}var Le=x(fe,[["render",je]]);const O=(t,s,n,c)=>{const i=s.value;t.addEventListener("mouseenter",()=>{i.hovered=!0}),t.addEventListener("mouseleave",()=>{i.hovered=!1})};function Ae(){return K({hovered:!1})}const Be=k({props:{},directives:{hoverState:O},setup(){const t=Ae();let s=h("pi pi-thumbs-up"),n=h(!1);const c=b(),{push:i}=T();return{createVote(){i("/create-vote")},test(){alert("success")},user:c,items:[{label:"\u6211\u7684",icon:"pi pi-ban"},{label:"\u8349",icon:"pi pi-cloud"}],push:i,changeIcon(){console.log(n.value),n.value==!1?(s.value="pi pi-check",n=h(!0)):(s.value="pi pi-thumbs-up",n.value=!1)},login(){window.location.href=`${he}?client_id=${pe}&redirect_uri=${ve}&state=${w}`},state:t,iconName:s}}}),v=t=>(Q("data-v-2964abc9"),t=t(),X(),t),Ee={class:"h-full grid grid-cols-12 text-light-50"},Te={header:"",class:"fixed z-10 grid grid-cols-12 w-full sm:p-3 p-0 h-25 bg-dark-900"},Ne=v(()=>e("div",{class:"px-2 col-span-2 flex gap-3 items-center"},[e("i",{class:"pi pi-bell",style:{fontSize:"2rem"}}),e("div",{class:"text-xl lg:block hidden"},"We Vote")],-1)),Pe={class:"col-start-4 col-span-6 flex justify-center"},Oe={class:"p-input-icon-left w-200 flex items-center"},Re=v(()=>e("i",{class:"pi pi-search",style:{fontSize:"1.5rem"}},null,-1)),Ue={class:"col-start-10 col-span-3 flex justify-end gap-5 cursor-pointer p-2"},De=v(()=>e("i",{class:"pi pi-pencil",style:{fontSize:"1rem"}},null,-1)),qe=v(()=>e("div",{class:"text-xl lg:block hidden"},"create vote",-1)),Fe=[De,qe],He=v(()=>e("i",{class:"pi pi-user",style:{fontSize:"1rem"}},null,-1)),Me=v(()=>e("div",{class:"text-xl lg:block hidden"},"login",-1)),Ge=[He,Me],Je={key:1,class:"flex flex-row items-center gap-2 hover:bg-dark-300 rounded-xl p-2"},We={class:"text-xl lg:block hidden"},Ke=v(()=>e("div",null,null,-1)),Qe={sidebar:"",class:"lg:grid grid-cols-12 w-full mt-25 fixed"},Xe={class:"lg:col-start-2 lg:col-span-2 lg:p-0 col-span-1"},Ye={class:"pr-5 flex flex-col gap-5"},Ze=v(()=>e("i",{class:"pi pi-home",style:{fontSize:"2rem"}},null,-1)),et=v(()=>e("div",{class:"text-2xl lg:block hidden"},"home",-1)),tt=[Ze,et],st=v(()=>e("i",{class:"pi pi-users",style:{fontSize:"2rem"}},null,-1)),ot=v(()=>e("div",{class:"text-2xl lg:block hidden"},"my page (can delete)",-1)),nt=[st,ot],it=v(()=>e("i",{class:"pi pi-clone",style:{fontSize:"2rem"}},null,-1)),rt=v(()=>e("div",{class:"text-2xl lg:block hidden"},"about app",-1)),at=[it,rt],lt=v(()=>e("a",{class:"flex flex-row gap-5 items-center hover:bg-dark-300 rounded-xl cursor-pointer p-2",href:"https://github.com/reterw/vvote"},[e("i",{class:"pi pi-github",style:{fontSize:"2rem"}}),e("div",{class:"text-2xl lg:block hidden"},"Github")],-1));function ct(t,s,n,c,i,a){const l=f("InputText"),o=f("Avatar"),r=f("router-view");return d(),u("div",Ee,[e("div",Te,[Ne,e("span",Pe,[e("span",Oe,[Re,_(l,{type:"text",placeholder:"type search",class:"bg-dark-100 w-full rounded-xl"})])]),e("div",Ue,[e("div",{class:"flex flex-row items-center gap-2 hover:bg-dark-300 rounded-xl p-2",onClick:s[0]||(s[0]=(...p)=>t.createVote&&t.createVote(...p))},Fe),t.user.isLogined?(d(),u("div",Je,[_(o,{image:t.user.avatarUrl},null,8,["image"]),e("div",We,g(t.user.username),1)])):(d(),u("div",{key:0,class:"flex flex-row items-center gap-2 hover:bg-dark-300 rounded-xl p-2",onClick:s[1]||(s[1]=(...p)=>t.login&&t.login(...p))},Ge))]),Ke]),e("div",Qe,[e("div",Xe,[e("div",Ye,[e("div",{class:"flex flex-row gap-5 items-center hover:bg-dark-300 rounded-xl cursor-pointer p-2",onClick:s[2]||(s[2]=p=>t.push("/"))},tt),e("div",{class:"flex flex-row gap-5 items-center hover:bg-dark-300 rounded-xl cursor-pointer p-2",onClick:s[3]||(s[3]=p=>t.push("/admin-page"))},nt),e("div",{class:"flex flex-row gap-5 items-center hover:bg-dark-300 rounded-xl cursor-pointer p-2",onClick:s[4]||(s[4]=p=>t.push("/about"))},at),lt])])]),_(r,{content:"",class:"mt-15 flex justify-center lg:col-span-6 lg:col-start-4 col-span-10 col-start-3 px-5 relative"})])}var dt=x(Be,[["render",ct],["__scopeId","data-v-2964abc9"]]);function ut(t){return{type:t,required:!0}}const pt=k({props:{content:ut(Object),admin:Boolean},emits:["vote","like","save","remove"],setup(t,s){const n=l=>l?"pi pi-check":"pi pi-thumbs-up",c=C(()=>t.content.liked?"pi pi-heart-fill":"pi pi-heart"),i=C(()=>t.content.saved?"pi pi-star-fill":"pi pi-star");return{doVote(l){s.emit("vote",l)},getVoteIconName:n,likedIcon:c,savedIcon:i,removeIcon:"pi pi-trash"}}}),vt={class:"sm:p-10 p-3 grid grid-cols-10 text-white"},mt={class:"col-span-4 font-black mt-5"},ht={class:"userName font-thin text-light-50"},ft={class:"title text-light-200"},_t={class:""},gt=e("div",{class:"flex-grow"},null,-1),bt={class:""},xt={class:"col-start-9 col-span-4 flex gap-3 sm:m-5 text-light-100"};function $t(t,s,n,c,i,a){const l=f("Avatar"),o=f("Button");return d(),u("div",vt,[t.content.avatar?(d(),N(l,{key:0,size:"xlarge",class:"p-avatar-circle mt-5 sm:col-span-1 col-span-2",image:t.content.avatar},null,8,["image"])):(d(),N(l,{key:1,icon:"pi pi-user",size:"xlarge",class:"p-avatar-circle mt-5 sm:col-span-1 col-span-2"})),e("div",mt,[e("div",ht,"@"+g(t.content.author),1),e("div",ft,g(t.content.title),1)]),(d(!0),u(I,null,V(t.content.choices,r=>(d(),u("div",{key:r.id,class:"flex col-start-2 col-span-8 items-center hover:bg-[rgba(255,255,255,0.2)] rounded p-2 cursor-pointer"},[e("div",_t,g(r.name),1),gt,e("div",bt,g(r.voteCount),1),_(o,{class:"p-button-text",icon:t.getVoteIconName(r.voted),onClick:p=>t.doVote(r)},null,8,["icon","onClick"])]))),128)),e("div",xt,[e("i",{class:z([t.likedIcon,"cursor-pointer"]),onClick:s[0]||(s[0]=r=>t.$emit("like",t.content))},null,2),e("i",{class:z([t.savedIcon,"cursor-pointer"]),onClick:s[1]||(s[1]=r=>t.$emit("save",t.content))},null,2),t.admin?(d(),u("i",{key:0,class:z([t.removeIcon,"cursor-pointer"]),onClick:s[2]||(s[2]=r=>t.$emit("remove",t.content))},null,2)):Y("",!0)])])}var R=x(pt,[["render",$t]]);const yt=k({components:{VoteBox:R},setup(){const{refresh:t}=S();return P(()=>{t()}),S()}}),kt={class:"flex flex-col"};function wt(t,s,n,c,i,a){const l=f("VoteBox");return d(),u("div",kt,[(d(!0),u(I,null,V(t.votes,o=>(d(),u("div",{key:o.id,class:"relative bg-dark-900 border-1 border-dark-100 col-span-2 mt-2"},[_(l,{content:o,onVote:r=>t.vote(o,r),onLike:t.like,onSave:t.save},null,8,["content","onVote","onLike","onSave"])]))),128))])}var St=x(yt,[["render",wt]]),It="/vvote/assets/602azureFunction.108458b2.jpg",Vt="/vvote/assets/cusmosdb.20fb6121.jpg",Ct="/vvote/assets/RestEndpoints.e07d7642.jpg",zt="/vvote/assets/githuboauth.a63fa0b0.jpg",jt="/vvote/assets/homepage.de221722.jpg",Lt="/vvote/assets/mypage.92fd3167.jpg",At="/vvote/assets/createvote.8f7a5fd7.jpg",Bt="/vvote/assets/createvote2.74145964.jpg",Et="/vvote/assets/vote1.fa7e193c.jpg",Tt="/vvote/assets/vote2.f88f95ac.jpg",Nt="/vvote/assets/votecount.7f2f5ad5.jpg",Pt="/vvote/assets/votehistory.bab89b62.jpg",Ot="/vvote/assets/restapi.bde22f86.jpg";const Rt={},Ut={class:"grid"},Dt=e("br",null,null,-1),qt=e("div",null,[e("div",null,[e("br"),e("label",{class:"text-6xl"},"Some details about this app"),e("br"),e("label",{class:"text-4xl"},"Azure function"),e("br"),e("label",{class:"text-2xl"},"My Server-Side functionality has been deployed on Microsoft Azure server"),e("br"),e("img",{src:It}),e("label",{class:"text-4xl"},"Persistence"),e("br"),e("label",{class:"text-2xl"},"Im using CusmosDB provide by Azure to save my data, which also share the Mongo API"),e("br"),e("img",{src:Vt}),e("label",{class:"text-4xl"},"Rest API endpoints"),e("br"),e("a",{class:"text-3xl text-yellow-200",href:"https://602vote.azurewebsites.net/api/vote"},"https://602vote.azurewebsites.net/api/vote"),e("img",{src:Ct}),e("label",{class:"text-4xl"},"Log in with github Oauth"),e("br"),e("br"),e("img",{src:zt}),e("label",{class:"text-4xl"},"Home Page render all user's vote together, and the vote box does not have delete button"),e("br"),e("br"),e("img",{src:jt}),e("label",{class:"text-4xl"},"my page is for admin, after you login , you can render the vote create by you, and also delete them by click the button."),e("br"),e("br"),e("img",{src:Lt}),e("label",{class:"text-4xl"},"for create vote, enter the title of the vote problem, and enter choice of it, then click submit."),e("br"),e("br"),e("img",{src:At}),e("img",{src:Bt}),e("label",{class:"text-4xl"},"click thumb to vote your choice."),e("br"),e("br"),e("img",{src:Et}),e("img",{src:Tt}),e("label",{class:"text-4xl"},"vote count will change in data base, and each prople's vote are recorded."),e("br"),e("br"),e("img",{src:Nt}),e("img",{src:Pt}),e("label",{class:"text-4xl"},"using delete, get, post and put methods."),e("br"),e("br"),e("img",{src:Ot})])],-1),Ft=[Dt,qt];function Ht(t,s){return d(),u("div",Ut,Ft)}var Mt=x(Rt,[["render",Ht]]);const Gt=k({components:{VoteBox:R},setup(){const{refresh:t}=S();let s=b().username;return P(()=>{t()}),B(A({},S()),{username:s})}}),Jt={class:"flex flex-col"};function Wt(t,s,n,c,i,a){const l=f("VoteBox");return d(),u("div",Jt,[(d(!0),u(I,null,V(t.votes.filter(o=>o.author==t.username),o=>(d(),u("div",{key:o.id,class:"relative bg-dark-900 border-1 border-dark-100 col-span-2 mt-2"},[_(l,{admin:!0,content:o,onVote:r=>t.vote(o,r),onLike:t.like,onSave:t.save,onRemove:t.remove},null,8,["content","onVote","onLike","onSave","onRemove"])]))),128))])}var Kt=x(Gt,[["render",Wt]]);const U=Z({history:ee(),routes:[{path:"/create-vote",component:Le},{path:"/",component:St},{path:"/about",component:Mt},{path:"/admin-page",component:Kt}]});U.afterEach((t,s,n)=>{document.querySelector("body").setAttribute("style","overflow: auto !important;")});const m=te(dt);m.use(U);m.use(se);m.directive("hover",O);m.component("chips",oe);m.component("Button",ne);m.component("InputText",ie);m.component("Fieldset",re);m.component("Checkbox",ae);m.component("Avatar",le);m.component("SpeedDial",ce);m.use(de());m.mount("#app");
